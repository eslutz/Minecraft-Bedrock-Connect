services:
  bedrock-connect:
    container_name: bedrock-connect
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      # UDP port for Minecraft Bedrock connections
      - "19132:19132/udp"
    volumes:
      # Persist player data
      - ./data/players:/app/players
      # Optional: mount custom configuration
      # Uncomment the line below if you want to use a config file
      # - ./config.yml:/app/config.yml:ro
      # Optional: mount custom servers configuration
      # Uncomment the line below if you want to use custom servers
      # - ./custom_servers.json:/app/custom_servers.json:ro
    environment:
      # Configuration via environment variables (prefix with BC_)
      # Examples:
      # - BC_PORT=19132
      # - BC_SERVER_LIMIT=100
      # - BC_CUSTOM_SERVERS=/app/custom_servers.json
      # - BC_KICK_INACTIVE=true
      # - BC_USER_SERVERS=true
      # - BC_FEATURED_SERVERS=true
      # - BC_DEBUG=false

      # Set JVM memory based on your Raspberry Pi model
      # Pi 4 (4GB+): -Xms512M -Xmx1G or -Xms1G -Xmx2G
      # Pi 4 (2GB): -Xms256M -Xmx512M or -Xms512M -Xmx1G
      # Pi 3: -Xms256M -Xmx512M
      - JAVA_OPTS=-Xms512M -Xmx1G
    restart: unless-stopped
    # Optional: Set resource limits to prevent overwhelming the Pi
    # Uncomment and adjust based on your Pi's specs
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '2.0'
    #       memory: 1536M
    #     reservations:
    #       cpus: '0.5'
    #       memory: 512M
